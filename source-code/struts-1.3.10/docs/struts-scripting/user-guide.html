<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Struts Scripting - User Guide</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://www.apache.org/" id="bannerLeft">
    
                                    <img src="http://www.apache.org/images/asf-logo.gif" alt="" />
    
            </a>
                        <a href="" id="bannerRight">
    
                                            <img src="images/struts.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2008-11-29
                      </div>
            <div class="xright">            <a href="http://www.apache.org/" class="externalLink">Apache</a>
            |
                <a href="2.x/">Struts 2</a>
            |
                <a href="1.x/">Struts 1</a>
            |
                <a href="1.x/">Struts 1</a>
            |
                <a href="2.x/">Struts 2</a>
            
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>Struts Scripting</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Welcome</a>
          </li>
              
    <li class="none">
              <strong>User Guide</strong>
        </li>
              
    <li class="none">
                    <a href="source-guide.html">Source Guide</a>
          </li>
          </ul>
              <h5>Components</h5>
            <ul>
              
    <li class="none">
                    <a href="../struts-apps/index.html">Struts Apps</a>
          </li>
              
    <li class="none">
                    <a href="../struts-el/index.html">Struts EL</a>
          </li>
              
    <li class="none">
                    <a href="../struts-extras/index.html">Struts Extras</a>
          </li>
              
    <li class="none">
                    <a href="../struts-faces/index.html">Struts Faces</a>
          </li>
              
    <li class="none">
                    <a href="../struts-scripting/index.html">Struts Scripting</a>
          </li>
              
    <li class="none">
                    <a href="../struts-taglib/index.html">Struts Taglib</a>
          </li>
              
    <li class="none">
                    <a href="../struts-tiles/index.html">Struts Tiles</a>
          </li>
          </ul>
              <h5>Quick Links</h5>
            <ul>
              
    <li class="none">
                    <a href="apidocs/index.html">Javadoc</a>
          </li>
              
    <li class="none">
                    <a href="../index.html">Struts 1</a>
          </li>
          </ul>
              <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-info.html">Project Information</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-reports.html">Project Reports</a>
                </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="User_Guide"></a>User Guide</h2>
<a name="overview"></a><p>The entire Struts Scripting component is only a few classes, since most of
      the heavy lifting is done by the 
      <a href="http://jakarta.apache.org/bsf" class="externalLink">Bean Scripting Framework</a> 
      and the scripting engines themselves.  Therefore, there are only a few steps
      you'll need to take in order to sucessfully install and use Struts Scripting.
        </p>
<ul><li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
</ul>
<div class="section"><h3><a name="Installation"></a>Installation</h3>
<a name="installation"></a><p>After downloading the Struts Scripting distribution, copy the Struts
         Scripting jar, <code>struts-scripting-1.0.1.jar</code>, to your application's
         libraries directory.  When deployed, this directory will be <code>WEB-INF/lib</code>.
         </p>
<p>Next, choose which scripting engine you want to use.  BSF ships with knowledge about
         the following languages and script extensions:</p>
<table class="bodyTable"><caption><strong>BSF-supported languages and extentions</strong></caption><thead><tr class="a"><td>javascript (js)</td>
<td>jacl (jacl)</td>
<td>netrexx (nrx)</td>
</tr>
<tr class="b"><td>java (java)</td>
<td>javaclass (class)</td>
<td>bml (bml)</td>
</tr>
<tr class="a"><td>vbscript (vbs)</td>
<td>jscript (jss)</td>
<td>perlscript (pls)</td>
</tr>
<tr class="b"><td>perl (pl)</td>
<td>jpython (py)</td>
<td>jython (py)</td>
</tr>
<tr class="a"><td>lotusscript (lss)</td>
<td>xslt (xslt)</td>
<td>pnuts (pnut)</td>
</tr>
<tr class="b"><td>beanbasic (bb)</td>
<td>beanshell (bsh)</td>
<td>ruby (rb)</td>
</tr>
<tr class="a"><td>judoscript (judo, jud)</td>
</tr>
</thead></table>
<p>Once you have picked a language, you need to download its libraries and install it 
        into your application, which usually means copying its jar files into the same location
        you copied the Struts Scripting jar.  If you are not sure, we recommend Groovy
        which ships with the Struts Scripting Mailreader example, as it features a very similar Java-like syntax.
        </p>
<p><i>Optional</i>: If you don't see your desired language that claims to support BSF, 
        or their BSF engine has changed from what BSF expects, you can manually define BSF 
        engines and have them loaded by Struts Scripting.
          Create a file called
          <code>struts-scripting.properties</code> and add two properties for each engine:
          </p>
<ul><li><code>struts-scripting.engine.ENGINE_NAME.class</code> - The class of the BSF
               engine where ENGINE_NAME is the name you are calling the engine.</li>
<li><code>struts-scripting.engine.ENGINE_NAME.extensions</code> - A comma-delimited
               list of file extensions that will be used to identify the engine to use
               to execute the script.</li>
</ul>
<p>The <code>struts-scripting.properties</code> should then stored in a directory
        accessible to the classloader, usually <code>WEB-INF/classes</code>.
        </p>
</div>
<div class="section"><h3><a name="Usage"></a>Usage</h3>
<a name="usage"></a><p>To determine what script will be executed, the &quot;parameter&quot; attribute of
           the action mapping should contain the name of the script relative to
           the web application root directory (i.e. http://server/app). In the place of 
         the traditional Action implementation, use the value <code>org.apache.struts.scripting.ScriptAction</code>.
         For example:
         </p>
<pre>
    &lt;action    path=&quot;/logoff&quot;
               type=&quot;org.apache.struts.scripting.ScriptAction&quot;
               parameter=&quot;/WEB-INF/scripts/Logoff.bsh&quot;&gt;
      &lt;forward name=&quot;success&quot;              path=&quot;/index.jsp&quot;/&gt;
    &lt;/action&gt;
</pre><p>In addition to specifying the script file, the &quot;parameter&quot; attribute can
        also contain parameters that will be passed to the script in the form of 
        pre-defined variables.  The format follows the URL format:</p>
<pre>
    parameter=&quot;/path/file.bsh?PARAMETER_NAME=PARAMETER_VALUE[&amp;amp;PARAMETER_NAME=PARAMETER_VALUE..]&quot;
</pre><p>This ability to pass parameters can enable DispatchAction-type behavior where one script file
            can handle multiple action paths.  If you are using Struts Action 1.3 or later, this feature
            isn't as useful since you can pass multiple values through ActionMapping using the 
            <code>&lt;set-property key=&quot;foo&quot; value=&quot;bar&quot;&gt;</code> syntax.
        </p>
<p>
        Before the script completes, the next ActionForward needs to be
        specified.  This can be done one of two ways:
        </p>
<ol type="1"><li>Set <code>struts.forwardName</code> to the name of the forward</li>
<li>Set <code>struts.forward</code> to the actual ActionForward object
              </li>
</ol>
<p>A number of pre-defined variables are available to the script:</p>
<ul><li><code>request</code> - The HTTP request</li>
<li><code>response</code> - The HTTP response</li>
<li><code>session</code> - The session</li>
<li><code>application</code> - The servlet context</li>
<li><code><a href="apidocs/org/apache/struts/scripting/StrutsInfo.html">struts</a></code> 
                - A grouping of all Struts-related objects</li>
<li><code>log</code> - A logging instance</li>
</ul>
<p>
          You can add your own variables by creating a BSFManagerFilter and
          configuring it in struts-scripting.properties:
          </p>
<ul><li><code>struts-scripting.filters.FILTER_NAME.class=FILTER_CLASS</code> - The
               class implementing BSFManagerFilter where FILTER_NAME is the name you
               are calling the filter.</li>
<li><code>struts-scripting.filters.FILTER_NAME.PROPERTY_NAME=PROPERTY_VALUE</code>
                - A property to be used by the filter.</li>
</ul>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2000-2008
    
          Apache Software Foundation
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
