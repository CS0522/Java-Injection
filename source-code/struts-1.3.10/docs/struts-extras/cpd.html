<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Struts Extras - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://www.apache.org/" id="bannerLeft">
    
                                    <img src="http://www.apache.org/images/asf-logo.gif" alt="" />
    
            </a>
                        <a href="" id="bannerRight">
    
                                            <img src="images/struts.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2008-11-29
                      </div>
            <div class="xright">            <a href="http://www.apache.org/" class="externalLink">Apache</a>
            |
                <a href="2.x/">Struts 2</a>
            |
                <a href="1.x/">Struts 1</a>
            |
                <a href="1.x/">Struts 1</a>
            |
                <a href="2.x/">Struts 2</a>
            
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>Struts Extras</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Welcome</a>
          </li>
          </ul>
              <h5>FAQs and HOWTOs</h5>
            <ul>
              
    <li class="none">
                    <a href="dispatchValidator.html">Dispatching And Validating</a>
          </li>
          </ul>
              <h5>Components</h5>
            <ul>
              
    <li class="none">
                    <a href="../struts-apps/index.html">Struts Apps</a>
          </li>
              
    <li class="none">
                    <a href="../struts-el/index.html">Struts EL</a>
          </li>
              
    <li class="none">
                    <a href="../struts-extras/index.html">Struts Extras</a>
          </li>
              
    <li class="none">
                    <a href="../struts-faces/index.html">Struts Faces</a>
          </li>
              
    <li class="none">
                    <a href="../struts-scripting/index.html">Struts Scripting</a>
          </li>
              
    <li class="none">
                    <a href="../struts-taglib/index.html">Struts Taglib</a>
          </li>
              
    <li class="none">
                    <a href="../struts-tiles/index.html">Struts Tiles</a>
          </li>
          </ul>
              <h5>Quick Links</h5>
            <ul>
              
    <li class="none">
                    <a href="apidocs/index.html">Javadoc</a>
          </li>
              
    <li class="none">
                    <a href="../index.html">Struts 1</a>
          </li>
          </ul>
              <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-info.html">Project Information</a>
                </li>
              
                
              
      
            
            
            
      
            
      
            
      
            
      
              
            <li class="expanded">
                    <a href="project-reports.html">Project Reports</a>
                  <ul>
                  
    <li class="none">
                    <a href="checkstyle.html">Checkstyle</a>
          </li>
                  
    <li class="none">
              <strong>CPD Report</strong>
        </li>
                  
    <li class="none">
                    <a href="apidocs/index.html">JavaDocs</a>
          </li>
                  
    <li class="none">
                    <a href="pmd.html">PMD Report</a>
          </li>
                  
    <li class="none">
                    <a href="xref/index.html">Source Xref</a>
          </li>
                  
    <li class="none">
                    <a href="surefire-report.html">Surefire Report</a>
          </li>
              </ul>
        </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results</h2>
<p>The following document contains the results of PMD's  <a href="http://pmd.sourceforge.net/cpd.html" class="externalLink">CPD</a> 4.2.2.</p>
</div>
<div class="section"><h2>Duplications</h2>
<p><table class="bodyTable"><tr class="a"><th>File</th>
<th>Line</th>
</tr>
<tr class="b"><td>org\apache\struts\actions\ActionDispatcher.java</td>
<td><a href="./xref/org/apache/struts/actions/ActionDispatcher.html#175">175</a></td>
</tr>
<tr class="a"><td>org\apache\struts\actions\DispatchAction.java</td>
<td><a href="./xref/org/apache/struts/actions/DispatchAction.html#123">123</a></td>
</tr>
<tr class="b"><td colspan='2'><div class="source"><pre>        };

    // --------------------------------------------------------- Public Methods

    /**
     * Process the specified HTTP request, and create the corresponding HTTP
     * response (or forward to another web component that will create it).
     * Return an &lt;code&gt;ActionForward&lt;/code&gt; instance describing where and how
     * control should be forwarded, or &lt;code&gt;null&lt;/code&gt; if the response has
     * already been completed.
     *
     * @param mapping  The ActionMapping used to select this instance
     * @param form     The optional ActionForm bean for this request (if any)
     * @param request  The HTTP request we are processing
     * @param response The HTTP response we are creating
     * @return The forward to which control should be transferred, or
     *         &lt;code&gt;null&lt;/code&gt; if the response has been completed.
     * @throws Exception if an exception occurs
     */
    public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
        if (isCancelled(request)) {
            ActionForward af = cancelled(mapping, form, request, response);

            if (af != null) {
                return af;
            }
        }

        // Get the parameter. This could be overridden in subclasses.
        String parameter = getParameter(mapping, form, request, response);

        // Get the method's name. This could be overridden in subclasses.
        String name =
            getMethodName(mapping, form, request, response, parameter);

        // Prevent recursive calls
        if (&quot;execute&quot;.equals(name) || &quot;perform&quot;.equals(name)) {
            String message =
                messages.getMessage(&quot;dispatch.recursive&quot;, mapping.getPath());

            log.error(message);
            throw new ServletException(message);
        }

        // Invoke the named method, and return the result
        return dispatchMethod(mapping, form, request, response, name);
    }

    /**
     * Method which is dispatched to when there is no value for specified
     * request parameter included in the request.  Subclasses of
     * &lt;code&gt;DispatchAction&lt;/code&gt; should override this method if they wish to
     * provide default behavior different than throwing a ServletException.
     *
     * @param mapping  The ActionMapping used to select this instance
     * @param form     The optional ActionForm bean for this request (if any)
     * @param request  The non-HTTP request we are processing
     * @param response The non-HTTP response we are creating
     * @return The forward to which control should be transferred, or
     *         &lt;code&gt;null&lt;/code&gt; if the response has been completed.
     * @throws Exception if the application business logic throws an
     *                   exception.
     */
    protected ActionForward unspecified(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
        String message =</pre>
</div>
</td></tr>
<table class="bodyTable"></p>
<p><table class="bodyTable"><tr class="a"><th>File</th>
<th>Line</th>
</tr>
<tr class="b"><td>org\apache\struts\actions\EventActionDispatcher.java</td>
<td><a href="./xref/org/apache/struts/actions/EventActionDispatcher.html#157">157</a></td>
</tr>
<tr class="a"><td>org\apache\struts\actions\EventDispatchAction.java</td>
<td><a href="./xref/org/apache/struts/actions/EventDispatchAction.html#116">116</a></td>
</tr>
<tr class="b"><td colspan='2'><div class="source"><pre>        throw new ServletException(message);
    }

    /**
     * Returns the method name, given a parameter's value.
     *
     * @param mapping   The ActionMapping used to select this instance
     * @param form      The optional ActionForm bean for this request (if
     *                  any)
     * @param request   The HTTP request we are processing
     * @param response  The HTTP response we are creating
     * @param parameter The &lt;code&gt;ActionMapping&lt;/code&gt; parameter's name
     * @return The method's name.
     * @throws Exception if an error occurs.
     */
    protected String getMethodName(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response,
            String parameter) throws Exception {

        StringTokenizer st = new StringTokenizer(parameter, &quot;,&quot;);
        String defaultMethodName = null;

        while (st.hasMoreTokens()) {
            String methodKey = st.nextToken().trim();
            String methodName = methodKey;

            // The key can either be a direct method name or an alias
            // to a method as indicated by a &quot;key=value&quot; signature
            int equals = methodKey.indexOf('=');
            if (equals &gt; -1) {
                methodName = methodKey.substring(equals + 1).trim();
                methodKey = methodKey.substring(0, equals).trim();
            }

            // Set the default if it passes by
            if (methodKey.equals(DEFAULT_METHOD_KEY)) {
                defaultMethodName = methodName;
            }

            // If the method key exists as a standalone parameter or with
            // the image suffixes (.x/.y), the method name has been found.
            if ((request.getParameter(methodKey) != null)
                  || (request.getParameter(methodKey + &quot;.x&quot;) != null)) {
                return methodName;
            }
        }

        return defaultMethodName;
    }
}</pre>
</div>
</td></tr>
<table class="bodyTable"></p>
<p><table class="bodyTable"><tr class="a"><th>File</th>
<th>Line</th>
</tr>
<tr class="b"><td>org\apache\struts\actions\ActionDispatcher.java</td>
<td><a href="./xref/org/apache/struts/actions/ActionDispatcher.html#362">362</a></td>
</tr>
<tr class="a"><td>org\apache\struts\actions\DispatchAction.java</td>
<td><a href="./xref/org/apache/struts/actions/DispatchAction.html#269">269</a></td>
</tr>
<tr class="b"><td colspan='2'><div class="source"><pre>            forward = (ActionForward) method.invoke(this, args);
        } catch (ClassCastException e) {
            String message =
                messages.getMessage(&quot;dispatch.return&quot;, mapping.getPath(), name);

            log.error(message, e);
            throw e;
        } catch (IllegalAccessException e) {
            String message =
                messages.getMessage(&quot;dispatch.error&quot;, mapping.getPath(), name);

            log.error(message, e);
            throw e;
        } catch (InvocationTargetException e) {
            // Rethrow the target exception if possible so that the
            // exception handling machinery can deal with it
            Throwable t = e.getTargetException();

            if (t instanceof Exception) {
                throw ((Exception) t);
            } else {
                String message =
                    messages.getMessage(&quot;dispatch.error&quot;, mapping.getPath(),
                        name);

                log.error(message, e);
                throw new ServletException(t);
            }
        }

        // Return the returned ActionForward instance
        return (forward);
    }

    /**
     * &lt;p&gt;Returns the parameter value.&lt;/p&gt;
     *
     * @param mapping  The ActionMapping used to select this instance
     * @param form     The optional ActionForm bean for this request (if any)
     * @param request  The HTTP request we are processing
     * @param response The HTTP response we are creating
     * @return The &lt;code&gt;ActionMapping&lt;/code&gt; parameter's value
     * @throws Exception if the parameter is missing.
     */
    protected String getParameter(ActionMapping mapping, ActionForm form,</pre>
</div>
</td></tr>
<table class="bodyTable"></p>
<p><table class="bodyTable"><tr class="a"><th>File</th>
<th>Line</th>
</tr>
<tr class="b"><td>org\apache\struts\actions\ActionDispatcher.java</td>
<td><a href="./xref/org/apache/struts/actions/ActionDispatcher.html#293">293</a></td>
</tr>
<tr class="a"><td>org\apache\struts\actions\DispatchAction.java</td>
<td><a href="./xref/org/apache/struts/actions/DispatchAction.html#220">220</a></td>
</tr>
<tr class="b"><td colspan='2'><div class="source"><pre>    }

    // ----------------------------------------------------- Protected Methods

    /**
     * Dispatch to the specified method.
     *
     * @param mapping  The ActionMapping used to select this instance
     * @param form     The optional ActionForm bean for this request (if any)
     * @param request  The non-HTTP request we are processing
     * @param response The non-HTTP response we are creating
     * @param name     The name of the method to invoke
     * @return The forward to which control should be transferred, or
     *         &lt;code&gt;null&lt;/code&gt; if the response has been completed.
     * @throws Exception if the application business logic throws an
     *                   exception.
     * @since Struts 1.1
     */
    protected ActionForward dispatchMethod(ActionMapping mapping,
        ActionForm form, HttpServletRequest request,
        HttpServletResponse response, String name)
        throws Exception {
        // Make sure we have a valid method name to call.
        // This may be null if the user hacks the query string.
        if (name == null) {
            return this.unspecified(mapping, form, request, response);
        }

        // Identify the method object to be dispatched to
        Method method = null;

        try {
            method = getMethod(name);
        } catch (NoSuchMethodException e) {
            String message =
                messages.getMessage(&quot;dispatch.method&quot;, mapping.getPath(), name);

            log.error(message, e);

            String userMsg =
                messages.getMessage(&quot;dispatch.method.user&quot;, mapping.getPath());
            throw new NoSuchMethodException(userMsg);
        }</pre>
</div>
</td></tr>
<table class="bodyTable"></p>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2000-2008
    
          Apache Software Foundation
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
