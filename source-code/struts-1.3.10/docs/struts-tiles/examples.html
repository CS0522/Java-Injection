<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Struts Tiles - Examples</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://www.apache.org/" id="bannerLeft">
    
                                    <img src="http://www.apache.org/images/asf-logo.gif" alt="" />
    
            </a>
                        <a href="" id="bannerRight">
    
                                            <img src="images/struts.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2008-11-29
                      </div>
            <div class="xright">            <a href="http://www.apache.org/" class="externalLink">Apache</a>
            |
                <a href="2.x/">Struts 2</a>
            |
                <a href="1.x/">Struts 1</a>
            |
                <a href="1.x/">Struts 1</a>
            |
                <a href="2.x/">Struts 2</a>
            
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>Struts Tiles</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Welcome</a>
          </li>
              
    <li class="none">
                    <a href="faq.html">FAQ</a>
          </li>
              
    <li class="none">
                    <a href="installation.html">Installation</a>
          </li>
              
    <li class="none">
                    <a href="userGuide.html">User Guide</a>
          </li>
              
    <li class="none">
              <strong>Creating Templates</strong>
        </li>
              
    <li class="none">
                    <a href="tagreference.html">Taglib Reference</a>
          </li>
          </ul>
              <h5>Components</h5>
            <ul>
              
    <li class="none">
                    <a href="../struts-apps/index.html">Struts Apps</a>
          </li>
              
    <li class="none">
                    <a href="../struts-el/index.html">Struts EL</a>
          </li>
              
    <li class="none">
                    <a href="../struts-extras/index.html">Struts Extras</a>
          </li>
              
    <li class="none">
                    <a href="../struts-faces/index.html">Struts Faces</a>
          </li>
              
    <li class="none">
                    <a href="../struts-scripting/index.html">Struts Scripting</a>
          </li>
              
    <li class="none">
                    <a href="../struts-taglib/index.html">Struts Taglib</a>
          </li>
              
    <li class="none">
                    <a href="../struts-tiles/index.html">Struts Tiles</a>
          </li>
          </ul>
              <h5>Quick Links</h5>
            <ul>
              
    <li class="none">
                    <a href="apidocs/index.html">Javadoc</a>
          </li>
              
    <li class="none">
                    <a href="../index.html">Struts 1</a>
          </li>
          </ul>
              <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-info.html">Project Information</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-reports.html">Project Reports</a>
                </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="Creating_Templates"></a>Creating Templates</h2>
<p>The following examples illustrate Tiles' templating features using a 
       basic template.  The template contains three elements: a title, a header,
       and a body displayed vertically.  These elements will be manipulated in 
       various ways in each example.  Tiles' flexibility will be demonstrated by
       defining the template &quot;inline&quot; in a JSP page and by loading it from a
       &quot;factory&quot; defined in an XML file.</p>
<div class="section"><h3><a name="Basic_Template"></a>Basic Template</h3>
<p>The first example shows the basic template.  There are three ways to 
       define the template.  First, it can be defined anonymously in a JSP page 
       by using the Tiles insert tag.  Secondly, it can be defined in a JSP 
       using the Tiles definition tag.  Finally, it can be defined in an XML
       file and loaded from a factory using the Tiles insert tag.  This example
       will illustrate all three methods.  First, let's look at the output of 
       the example.  Then we will examine each method.</p>
<strong>Example Output</strong><div align="center" width="300" border="2" bordercolor="black"><table class="bodyTable"><tr class="a"><td><strong>This is the title.</strong></td>
</tr>
<tr class="b"><td><strong>This is the header</strong><img src="images/struts-power.gif" /></td>
</tr>
<tr class="a"><td><div align="center"><b><i>This is the body</i></b></div></td>
</tr>
</table>
</div><p>First let's look at the template.  The layout.jsp file contains the
       template code.  This file does not change no matter whether the Tile
       is defined anonymously, in a JSP, or in an XML definitions file.</p>
<strong>file: layout.jsp</strong><div class="source"><pre>
&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot; %&gt;

&lt;table  border=&quot;2&quot;  width=&quot;300&quot;  bordercolor=&quot;Gray&quot;&gt;
  &lt;tr&gt;
    &lt;td  bgcolor=&quot;Blue&quot;&gt;&lt;strong&gt;&lt;tiles:getAsString name=&quot;title&quot;/&gt;&lt;/strong&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;tiles:insert attribute=&quot;header&quot;/&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;tiles:insert attribute=&quot;body&quot;/&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;                     
    </pre>
</div>
<p>Next we show the template being inserted anonymously using the Tiles
       insert tag.  The insert tag is used to define the Tile and insert it in
       a single action.  The Tile is not placed in the Definitions Factory and
       is not available for later use.  The template is invoked and the 
       attributes are filled in.  Notice that the title is inserted directly and
       the header and body values are included JSP pages.</p>
<strong>file: somepage.jsp </strong><div class="source"><pre>
&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot; %&gt;

&lt;tiles:insert template=&quot;layout.jsp&quot;&gt;
  &lt;tiles:put name=&quot;title&quot;  value=&quot;This is the title.&quot; /&gt;
  &lt;tiles:put name=&quot;header&quot; value=&quot;header.jsp&quot; /&gt;
  &lt;tiles:put name=&quot;body&quot;   value=&quot;body.jsp&quot; /&gt;
&lt;/tiles:insert&gt;
    </pre>
</div>
<strong>file: header.jsp </strong><div class="source"><pre>
&lt;strong&gt;This is the header&lt;/strong&gt;
&lt;img src=&quot;&lt;%=request.getContextPath()%&gt;/images/struts-power.gif&quot; align=&quot;right&quot; border=&quot;0&quot;/&gt;
    </pre>
</div>
<strong>file: body.jsp </strong><div class="source"><pre>
&lt;div align=&quot;center&quot;&gt;&lt;b&gt;&lt;i&gt;This is a body&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;
    </pre>
</div>
<p>Now we will see the same example in a different way.  In this version the
       Tile is defined in a JSP using the Tiles definition tag.  This works very
       similarly to the anonymous version.  The only difference is that it is not
       anonymous.  Using this method the template is included and populated and
       the Tile is inserted into the Definitions Factory so that it can be used
       by other JSP pages.</p>
<strong>file: somepage.jsp </strong><div class="source"><pre>
&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot; %&gt;

&lt;tiles:definition id=&quot;templateDefinition&quot; template=&quot;layout.jsp&quot;&gt;
  &lt;tiles:put name=&quot;title&quot;  value=&quot;This is the title.&quot; /&gt;
  &lt;tiles:put name=&quot;header&quot; value=&quot;header.jsp&quot; /&gt;
  &lt;tiles:put name=&quot;body&quot;   value=&quot;body.jsp&quot; /&gt;
&lt;/tiles:definition&gt;
&lt;tiles:insert definition=&quot;templateDefinition&quot; /&gt;
    </pre>
</div>
<p>Using this method of defining Tiles can be very tricky.  If you define a
       Tile like this and then insert it in another page using the Tiles insert
       tag, you must make sure that JSP page will never be invoked before the 
       page that defines the Tile.  The Tiles Definitions Factory is stored in 
       application scope.  So if the server is restarted or the Definitions 
       Factory is reloaded for any reason, a Tile defined in a JSP page is not
       reloaded until that JSP page is invoked.</p>
<p>The scenario above can be avoided by defining Tiles in an XML configuration
       file.  The file is loaded at servlet startup using the Tiles Servlet or
       a plugin.  The example below defines the Tile in an XML file and
       uses the Tiles insert tag in a JSP to invoke it.</p>
<strong>file: WEB-INF/tiles-defs.xml</strong><div class="source"><pre>
...
&lt;definition name=&quot;templateDefinition&quot; path=&quot;/layout.jsp&quot;&gt;
  &lt;put name=&quot;title&quot;  value=&quot;This is the title.&quot; /&gt;
  &lt;put name=&quot;header&quot; value=&quot;header.jsp&quot; /&gt;
  &lt;put name=&quot;body&quot;   value=&quot;body.jsp&quot; /&gt;
&lt;/definition&gt;
...
    </pre>
</div>
<strong>file: somepage.jsp</strong><div class="source"><pre>
&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot; %&gt;

&lt;tiles:insert beanName=&quot;templateDefinition&quot; /&gt;
    </pre>
</div>
<p>This is the preferred method of defining Tiles.  It ensures that all
       definitions are loaded at application startup and reduces the coupling
       between JSP pages.</p>
</div>
<div class="section"><h3><a name="Specify_Attribute_Types"></a>Specify Attribute Types</h3>
<p>The previous examples used the <strong>put</strong> tag to set
       attributes in a Tiles definition. In those examples Tiles inferred they 
       attribute type.  In most cases this is fine as long as you understand the
       rules of how value types are inferred.  More on that later.  This example
       shows that you can specify the attribute type to give Tiles a hint about
       what to do with the value.</p>
<strong>file: WEB-INF/tiles-defs.xml</strong><div class="source"><pre>
...
&lt;definition name=&quot;templateDefinition&quot; path=&quot;/layout.jsp&quot;&gt;
  &lt;put name=&quot;title&quot;  value=&quot;Title with specified Type.&quot; type=&quot;string&quot; /&gt;
  &lt;put name=&quot;header&quot; value=&quot;header.jsp&quot; type=&quot;page&quot; /&gt;
  &lt;put name=&quot;body&quot;   value=&quot;body.jsp&quot; type=&quot;page&quot; /&gt;
&lt;/definition&gt;
...
    </pre>
</div>
<p>The above code is really no different from the first example.  Tiles 
       would've inferred the types we specified.  There are several valid 
       settings for the type attribute.  However, they all resolve to just
       three different types.  The type will be interpreted in one of the
       following ways.</p>
<ul><li><strong>String.</strong>  Value will be inserted directly in the 
            page as text.</li>
<li><strong>Definition.</strong>  Value points to a valid Tiles definition
            that will be processed and inserted in the page.</li>
<li><strong>Page.</strong>  Value points to a JSP page that will be
            included in the current page.</li>
</ul>
<p>In most cases Tiles will determine the appropriate type.  When would you
       need to specify it?  Perhaps you have an attribute that is a logo that is
       either reused or overriden for a Tile.  Tiles might interpret this value
       as a path and try to process it as a JSP page.  If you specify it as a 
       String it will be inserted directly into the page.  It would also be 
       useful to specify the type if the value points to a Tiles definition
       and you want to make sure Tiles doesn't interpret it as a direct
       String.</p>
</div>
<div class="section"><h3><a name="Set_Attribute_With_Tag_Body"></a>Set Attribute With Tag Body</h3>
<strong>Example Output</strong><div align="center" width="300" border="2" bordercolor="black"><table class="bodyTable"><tr class="b"><td><strong>Test with tag body.</strong></td>
</tr>
<tr class="a"><td><strong>This header is inserted as body of tag</strong></td>
</tr>
<tr class="b"><td><div align="center"><b><i>This is the body</i></b></div></td>
</tr>
</table>
</div><strong>file: WEB-INF/tiles-defs.xml</strong><div class="source"><pre>
...
&lt;definition name=&quot;templateDefinition&quot; path=&quot;/layout.jsp&quot;&gt;
  &lt;put name=&quot;title&quot;  value=&quot;Test with tag body.&quot; type=&quot;string&quot; /&gt;
  &lt;put name=&quot;header&quot; type=&quot;string&quot; &gt;
    &lt;strong&gt;This header is inserted as body of tag&lt;/strong&gt;
  &lt;/put&gt;
  &lt;put name=&quot;body&quot;   value=&quot;body.jsp&quot; type=&quot;page&quot; /&gt;
&lt;/definition&gt;
...
    </pre>
</div>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2000-2008
    
          Apache Software Foundation
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
